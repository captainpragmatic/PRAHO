{% load i18n %}

<!-- WCAG-Compliant Order Process Breadcrumbs -->
<nav aria-label="{% trans 'Order process steps' %}" class="mb-8">
  <ol class="flex items-center space-x-4 overflow-x-auto pb-2" role="list">
    
    <!-- Step 1: Product Selection -->
    <li class="flex items-center flex-shrink-0" role="listitem">
      {% if current_step == 'products' %}
      <div class="flex items-center text-sm" aria-current="step">
      {% else %}
      <a href="{% url 'orders:catalog' %}" 
         class="flex items-center text-sm hover:text-blue-300 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded p-1">
      {% endif %}
        <span class="{% if current_step == 'products' %}bg-blue-600 text-white ring-2 ring-blue-300 ring-offset-2 ring-offset-slate-900{% else %}bg-slate-600 text-slate-300{% endif %} 
                     w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold mr-3"
              aria-hidden="true">
          1
        </span>
        <span class="{% if current_step == 'products' %}text-blue-400 font-medium{% else %}text-slate-400{% endif %}">
          ðŸ“¦ {% trans 'Product Selection' %}
        </span>
      {% if current_step == 'products' %}
      </div>
      <span class="sr-only">{% trans '(current step)' %}</span>
      {% else %}
      </a>
      {% endif %}
    </li>
    
    <!-- Arrow -->
    <li class="text-slate-500 flex-shrink-0" aria-hidden="true">â†’</li>
    
    <!-- Step 2: Cart Review -->
    <li class="flex items-center flex-shrink-0" role="listitem">
      {% if current_step == 'cart' %}
      <div class="flex items-center text-sm" aria-current="step">
      {% else %}
      <div class="flex items-center text-sm">
      {% endif %}
        <span class="{% if current_step == 'cart' %}bg-blue-600 text-white ring-2 ring-blue-300 ring-offset-2 ring-offset-slate-900{% else %}bg-slate-600 text-slate-500{% endif %} 
                     w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold mr-3"
              aria-hidden="true">
          2
        </span>
        <span class="{% if current_step == 'cart' %}text-blue-400 font-medium{% else %}text-slate-500{% endif %}">
          ðŸ›’ {% trans 'Cart Review' %}
        </span>
      </div>
      {% if current_step == 'cart' %}
      <span class="sr-only">{% trans '(current step)' %}</span>
      {% endif %}
    </li>
    
    <!-- Arrow -->
    <li class="text-slate-500 flex-shrink-0" aria-hidden="true">â†’</li>
    
    <!-- Step 3: Checkout -->
    <li class="flex items-center flex-shrink-0" role="listitem">
      {% if current_step == 'checkout' %}
      <div class="flex items-center text-sm" aria-current="step">
      {% else %}
      <div class="flex items-center text-sm">
      {% endif %}
        <span class="{% if current_step == 'checkout' %}bg-blue-600 text-white ring-2 ring-blue-300 ring-offset-2 ring-offset-slate-900{% else %}bg-slate-600 text-slate-500{% endif %} 
                     w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold mr-3"
              aria-hidden="true">
          3
        </span>
        <span class="{% if current_step == 'checkout' %}text-blue-400 font-medium{% else %}text-slate-500{% endif %}">
          ðŸ’³ {% trans 'Checkout' %}
        </span>
      </div>
      {% if current_step == 'checkout' %}
      <span class="sr-only">{% trans '(current step)' %}</span>
      {% endif %}
    </li>
    
    <!-- Arrow -->
    <li class="text-slate-500 flex-shrink-0" aria-hidden="true">â†’</li>
    
    <!-- Step 4: Confirmation -->
    <li class="flex items-center flex-shrink-0" role="listitem">
      {% if current_step == 'confirm' %}
      <div class="flex items-center text-sm" aria-current="step">
      {% else %}
      <div class="flex items-center text-sm">
      {% endif %}
        <span class="{% if current_step == 'confirm' %}bg-green-600 text-white ring-2 ring-green-300 ring-offset-2 ring-offset-slate-900{% else %}bg-slate-600 text-slate-500{% endif %} 
                     w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold mr-3"
              aria-hidden="true">
          {% if current_step == 'confirm' %}âœ“{% else %}4{% endif %}
        </span>
        <span class="{% if current_step == 'confirm' %}text-green-400 font-medium{% else %}text-slate-500{% endif %}">
          âœ… {% trans 'Confirmation' %}
        </span>
      </div>
      {% if current_step == 'confirm' %}
      <span class="sr-only">{% trans '(completed)' %}</span>
      {% endif %}
    </li>
  </ol>
  
  <!-- Live region for dynamic step updates -->
  <div id="step-announcements" aria-live="polite" aria-atomic="true" class="sr-only"></div>
</nav>